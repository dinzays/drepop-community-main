import { NextResponse } from 'next/server';
import db from '@/lib/db';
import { users, monthlySnapshots } from '@/db/schema';
import { eq } from 'drizzle-orm';

const SEED_DATA = [{ "username": "hatiim11", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "RAFM9", "campaignCode": "drepop", "wagerAmount": 15 }, { "username": "medblhnd", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "yvssinee48", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "bllmaadaraa", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "9amar45", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "K100", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "hmedl7way", "campaignCode": "drepop", "wagerAmount": 245.52512536708946 }, { "username": "jamalwabol", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Khalidd22", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Alucard07", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "enzo7626i", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "lucasdzb", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "simoALMAZKITI12", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "drebilal999", "campaignCode": "drepop", "wagerAmount": 180.71646943 }, { "username": "HamzvXx777", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "piroxxxx", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Maloki", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "invoxx", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Bilal12321", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Mrsimlb", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Moourad", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "mdmdmzmz4545", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "genmapop", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Yaciine", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "souleater4", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Carascoo", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "danona11", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ROBAALINHO", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "zirex999", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "feizy", "campaignCode": "drepop", "wagerAmount": 7776.1903336534715 }, { "username": "aissavvx", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Mr2Piece", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "drestoop", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "hmreda", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "AshhhDailymoney", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "sinw444ar", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "3alii", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "777Criminal", "campaignCode": "drepop", "wagerAmount": 5 }, { "username": "Twiriii", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "BejiLintar", "campaignCode": "drepop", "wagerAmount": 12536 }, { "username": "khorchoof", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "antismoking", "campaignCode": "drepop", "wagerAmount": 408.8802596133787 }, { "username": "Donnn999", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "jalalat", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Popup", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "lhaj", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Yildrem34", "campaignCode": "drepop", "wagerAmount": 221.9202540245613 }, { "username": "bigxthablugLog", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "chani9a", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ilyasgg", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "monsifalla", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Mounir099", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Mounir09", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Cocca", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "grga3ax1", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Serengete22", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Skyyix", "campaignCode": "drepop", "wagerAmount": 235.48548397 }, { "username": "hohox", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "manolopi", "campaignCode": "drepop", "wagerAmount": 12 }, { "username": "JACKAL01", "campaignCode": "drepop", "wagerAmount": 6.065062929999997 }, { "username": "LAROKHA", "campaignCode": "drepop", "wagerAmount": 14 }, { "username": "mokriyahya", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "rachidW", "campaignCode": "drepop", "wagerAmount": 20384.345271405808 }, { "username": "shefcasino1", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ZelalReaper", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "feliix", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "0634834099", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "REDAWI022", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "SKATRO1", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ujhikhufhjkq", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "KASPER02K", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Anas1821", "campaignCode": "drepop", "wagerAmount": 2022.48407404 }, { "username": "RaidenDaGoat", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Malkan", "campaignCode": "drepop", "wagerAmount": 10092.8 }, { "username": "Clax009", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "UTMAANE", "campaignCode": "drepop", "wagerAmount": 63.76661516 }, { "username": "Vinozzz", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Holako09", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Imeddz", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Amiiinnnee", "campaignCode": "drepop", "wagerAmount": 10 }, { "username": "zodiac7777", "campaignCode": "drepop", "wagerAmount": 2138.0110846885714 }, { "username": "Caralhoo", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "nutproeb", "campaignCode": "drepop", "wagerAmount": 136.4841607451 }, { "username": "SMOKEY666", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "twistedTempo", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "zacariah", "campaignCode": "drepop", "wagerAmount": 27.9 }, { "username": "hadeeesz", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Bilal3572", "campaignCode": "drepop", "wagerAmount": 70.41152517 }, { "username": "Makinadyali", "campaignCode": "drepop", "wagerAmount": 3008.52 }, { "username": "XOTWOD", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Ibrhimkhosa143", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ALIOUDAI", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "amlllne", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Zanaple12", "campaignCode": "drepop", "wagerAmount": 47.7990574822 }, { "username": "SidKuhin", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Sapi12222111", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Akhra", "campaignCode": "drepop", "wagerAmount": 100.75950367652524 }, { "username": "shdowx7", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Mxunir", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "MOLTMR", "campaignCode": "drepop", "wagerAmount": 188.8 }, { "username": "HICHAMrdf", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "zackaariaa", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Zkika", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "chitan666", "campaignCode": "drepop", "wagerAmount": 30.007908565 }, { "username": "Wantef", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "0ldman", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Dzeko09", "campaignCode": "drepop", "wagerAmount": 192.547 }, { "username": "rahim100", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "777qweft", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "anashm200", "campaignCode": "drepop", "wagerAmount": 51.199999999999996 }, { "username": "Zaka309", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "payl01d", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "alaadine", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Morningstar3355", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Itsthedoubledi", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "abduh", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Haytam2003", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "st1nixx", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "kfayta", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "afonkaa", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "kingof2ighter", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "A3DAM", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "UnluckySeemo", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Yeager04", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "azzdine48", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "WaEros", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "maiss", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "FASTERX", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ZANJLAN", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Yassin20as", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "OUSSAMAA01", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "amintoxic", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "i777la", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Simodarkhxc", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "notilost", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Leeyoo", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "LGHRAB", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Amvvnee", "campaignCode": "drepop", "wagerAmount": 15 }, { "username": "amineDM7", "campaignCode": "drepop", "wagerAmount": 354.2349538013 }, { "username": "hasbi24", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Davidikik", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "fahdzz", "campaignCode": "drepop", "wagerAmount": 46 }, { "username": "LangeRitche", "campaignCode": "drepop", "wagerAmount": 514.248841974425 }, { "username": "flipaqlf", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Uuu19610012710", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "XODEM199", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "zizooox", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Average911", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "iamlakrafi", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "SimoW", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Ryuk369", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "AYOUBIR", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Mohamed07", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "efsfsfff99f", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Fifftyyy", "campaignCode": "drepop", "wagerAmount": 10 }, { "username": "oscaroscarhh", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ribattiiii", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "zorodrep", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "mouradmm", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ZoroAl3adim", "campaignCode": "drepop", "wagerAmount": 1237.7977956598659 }, { "username": "longoss20", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Sloppy12", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "erritox", "campaignCode": "drepop", "wagerAmount": 13641.080592011751 }, { "username": "fachlouqq", "campaignCode": "drepop", "wagerAmount": 18561.525120520422 }, { "username": "yassineAMAG", "campaignCode": "drepop", "wagerAmount": 90.27880147869786 }, { "username": "Love43", "campaignCode": "drepop", "wagerAmount": 99.6774425861 }, { "username": "putin23volodya", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "inisco", "campaignCode": "drepop", "wagerAmount": 639.4791005139753 }, { "username": "ADQB", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Monceflking", "campaignCode": "drepop", "wagerAmount": 3086.6632065825693 }, { "username": "goodishere12", "campaignCode": "drepop", "wagerAmount": 17197.058054380796 }, { "username": "kabori", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Moukha88", "campaignCode": "drepop", "wagerAmount": 36.84 }, { "username": "Hades6667", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Miifa", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "calah", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Lbzaaa9", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "9alawan", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "B3LOLA", "campaignCode": "drepop", "wagerAmount": 1642.3471643642183 }, { "username": "kayntheassassin", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Karim9999", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "ilyassfares", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Charlee", "campaignCode": "drepop", "wagerAmount": 1849.9322436149348 }, { "username": "Drepopdzb", "campaignCode": "drepop", "wagerAmount": 133.57361877 }, { "username": "Nizar123", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "3ali", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "jok", "campaignCode": "drepop", "wagerAmount": 16 }, { "username": "ZBELBOULA", "campaignCode": "drepop", "wagerAmount": 7303.679409692225 }, { "username": "shinigami1854", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "wldjabl01", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Goaaaaaallllll", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "simooornes", "campaignCode": "drepop", "wagerAmount": 0 }, { "username": "Xmp1x", "campaignCode": "drepop", "wagerAmount": 13.1 }];

export async function GET() {
    return NextResponse.json({ success: false, error: "Route expired, use a newer version provided by the dev" }, { status: 404 });

    // try {
    //     // 1. Clear database
    //     await db.delete(monthlySnapshots);
    //     await db.delete(users);

    //     console.log('Database cleared.');

    //     // 2. Insert Users and November 10 Snapshots
    //     // 2. Insert Users and Snapshots
    //     // Nov 10 Period: Start = 0, End = JSON Value.
    //     // Dec 10 Period: Start = JSON Value, End = null (current).
    //     const nov10 = new Date('2025-11-10');
    //     const dec10 = new Date('2025-12-10');

    //     console.log('Seeding data...');

    //     for (const item of SEED_DATA) {
    //         // Insert User (Current Lifetime = JSON Value)
    //         // NOTE: This will later be updated by the main Cron to the "Live" value (Dec 11).
    //         await db.insert(users).values({
    //             username: item.username,
    //             current_lifetime_wager: item.wagerAmount.toString(),
    //         });

    //         // Get User ID
    //         const user = await db.query.users.findFirst({ where: eq(users.username, item.username) });
    //         if (!user) continue;

    //         // Insert Snapshot Nov 10 (Closed)
    //         await db.insert(monthlySnapshots).values({
    //             userId: user.id,
    //             periodStartDate: nov10,
    //             startSnapshotAmount: '0', // First month starts at 0
    //             endSnapshotAmount: item.wagerAmount.toString(),
    //         });

    //         // Insert Snapshot Dec 10 (Open, Starting from Nov End)
    //         await db.insert(monthlySnapshots).values({
    //             userId: user.id,
    //             periodStartDate: dec10,
    //             startSnapshotAmount: item.wagerAmount.toString(),
    //             endSnapshotAmount: null,
    //         });
    //     }

    //     return NextResponse.json({ success: true, message: 'Backfill complete. Now run the main cron.' });
    // } catch (error) {
    //     console.error('Backfill failed:', error);
    //     return NextResponse.json({ success: false, error: String(error) }, { status: 500 });
    // }
}
